<div>
  <div class="d-flex">
    <div
      [style.cursor]="typeChangeAllowed ? 'pointer' : 'default'"
      [ngClass]="{ active: isMetric, 'non-active': !isMetric }"
      [attr.data-testId]="'metricTab'"
      class="metric tab-title tabfocus"
      (click)="switchKeyResultType('metric')"
      (keydown.enter)="switchKeyResultType('metric')"
      tabindex="0"
    >
      Metrisch
    </div>
    <div
      [style.cursor]="typeChangeAllowed ? 'pointer' : 'default'"
      [ngClass]="{ active: !isMetric, 'non-active': isMetric }"
      [attr.data-testId]="'ordinalTab'"
      class="ordinal tab-title tabfocus"
      (click)="switchKeyResultType('ordinal')"
      (keydown.enter)="switchKeyResultType('ordinal')"
      tabindex="0"
    >
      Ordinal
    </div>
    <div class="buffer tab-title flex-fill"></div>
  </div>
</div>

<div *ngIf="isMetric; else ordinalBlock">
  <form [formGroup]="keyResultForm" class="gap-1">
    <div class="d-flex flex-column flex-wrap container p-0">
      <div class="d-flex flex-row">
        <div class="flex-fill">
          <div class="input-alignments gap-2">
            <div class="input-style gap-2">
              <label class="text-black" for="unit">Einheit</label>
              <select
                class="unit-dropdown bg-white menu-option"
                [ngClass]="formInputCheck(keyResultForm, 'unit')"
                formControlName="unit"
                id="unit"
                [attr.data-testId]="'unit'"
              >
                <option *ngFor="let unit of Unit | keyvalue" value="{{ unit.value }}">
                  {{ "UNIT." + unit.value | translate }}
                </option>
              </select>
              <div *ngIf="isTouchedOrDirty('unit')">
                <mat-error *ngFor="let errorKey of getErrorKeysOfFormField('unit')">
                  <span>{{ errorMessages[errorKey.toUpperCase()] }}</span>
                </mat-error>
              </div>
            </div>

            <div class="input-style gap-2">
              <label class="text-black" for="baseline">Baseline</label>
              <input
                [attr.data-testId]="'baseline'"
                class="metric-fields"
                [ngClass]="formInputCheck(keyResultForm, 'baseline')"
                formControlName="baseline"
                id="baseline"
              />
              <span *ngIf="isTouchedOrDirty('baseline')">
                <mat-error *ngFor="let errorKey of getErrorKeysOfFormField('baseline')">
                  <span>{{ errorMessages[errorKey.toUpperCase()] }}</span>
                </mat-error>
              </span>
            </div>

            <div class="input-style gap-2">
              <label class="text-black" for="stretchGoal">Stretch Goal</label>
              <input
                [attr.data-testId]="'stretchGoal'"
                class="metric-fields"
                [ngClass]="formInputCheck(keyResultForm, 'stretchGoal')"
                formControlName="stretchGoal"
                id="stretchGoal"
              />
              <span *ngIf="isTouchedOrDirty('stretchGoal')">
                <mat-error *ngFor="let errorKey of getErrorKeysOfFormField('stretchGoal')">
                  <span>{{ errorMessages[errorKey.toUpperCase()] }}</span>
                </mat-error>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<ng-template #ordinalBlock>
  <form [formGroup]="keyResultForm" class="gap-1">
    <div class="d-flex flex-column flex-wrap container p-0">
      <div class="d-flex flex-row">
        <div class="flex-fill">
          <div class="input-alignments gap-2">
            <div class="input-style gap-2">
              <label class="text-black" for="commitZone">Commit Zone</label>
              <textarea
                [attr.data-testId]="'commitZone'"
                class="ordinal-input-fields"
                [ngClass]="formInputCheck(keyResultForm, 'commitZone')"
                formControlName="commitZone"
                id="commitZone"
              ></textarea>
              <span *ngIf="isTouchedOrDirty('commitZone')">
                <mat-error *ngFor="let errorKey of getErrorKeysOfFormField('commitZone')">
                  <span>{{ errorMessages[errorKey.toUpperCase()] }}</span>
                </mat-error>
              </span>
            </div>

            <div class="input-style gap-2">
              <label class="text-black" for="targetZone">Target Zone</label>
              <textarea
                [attr.data-testId]="'targetZone'"
                class="ordinal-input-fields"
                [ngClass]="formInputCheck(keyResultForm, 'targetZone')"
                formControlName="targetZone"
                id="targetZone"
              ></textarea>
              <span *ngIf="isTouchedOrDirty('targetZone')">
                <mat-error *ngFor="let errorKey of getErrorKeysOfFormField('targetZone')">
                  <span>{{ errorMessages[errorKey.toUpperCase()] }}</span>
                </mat-error>
              </span>
            </div>

            <div class="input-style gap-2">
              <label class="text-black" for="stretchZone">Stretch Zone</label>
              <textarea
                [attr.data-testId]="'stretchZone'"
                class="ordinal-input-fields"
                [ngClass]="formInputCheck(keyResultForm, 'stretchZone')"
                formControlName="stretchZone"
                id="stretchZone"
              ></textarea>
              <span *ngIf="isTouchedOrDirty('stretchZone')">
                <mat-error *ngFor="let errorKey of getErrorKeysOfFormField('stretchZone')">
                  <span>{{ errorMessages[errorKey.toUpperCase()] }}</span>
                </mat-error>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</ng-template>
